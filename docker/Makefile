GERRIT_MAJOR_VERSION ?= 2
GERRIT_MINOR_VERSION ?= 14
GERRIT_MICRO_VERSION ?= 3
GERRIT_WAR_SHA1 ?= 399db7385be85eedf71caa464d91726fe37d26ca

build:
	docker build . \
		--tag opalmer/gerrittest:$(GERRIT_MAJOR_VERSION).$(GERRIT_MINOR_VERSION).$(GERRIT_MICRO_VERSION) \
		--build-arg GERRIT_MAJOR_VERSION=$(GERRIT_MAJOR_VERSION) \
		--build-arg GERRIT_MINOR_VERSION=$(GERRIT_MINOR_VERSION) \
		--build-arg GERRIT_MICRO_VERSION=$(GERRIT_MICRO_VERSION) \
		--build-arg GERRIT_WAR_SHA1=$(GERRIT_WAR_SHA1)

push:
	docker push opalmer/gerrittest:$(GERRIT_MAJOR_VERSION).$(GERRIT_MINOR_VERSION).$(GERRIT_MICRO_VERSION)

publish: build push
